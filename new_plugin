Prestep:
- Read whole document
- Determine teammate toolcalls for plugin
- Please for the love of god use LSPs
- Take inspiration on the concept of spelunking with hashes https://github.com/ChrisMckerracher/claude_stuff from the spelunker here and reuse this for efficency
- Determine if builtin task system is sufficient for ask(newest claude code) or if we should use beads,  or a lighter weight custom solution
- Identify all neccessary agent personas
    - Write both an agent and a skill for each
    - Ensure the Teamate toolcalls are actually written in the skills and agents and don't halluciante

Type of work: Epic
---
Structure of work
Plnning Phase. Aka Planning Team
 1. Team lead works on checked out branch
 2. Team lead determines based on request if product needs to go first or if product + architect can work in parallel
 2. Team lead delegates to architect for technical doc
 3. Team lead delegates to product for .feature files and briefs
 4. Team lead informs Archictect and product agents to talk to each other as they work on their documents
 5. Once done, each agent informs team lead for review
 6. Team lead waits for both to be complete to review.
 7. If team lead has notes, sends to the relevant teamate for updates
 8. This may require the other teamate to update work as well
 9. Once approved, team lead decomposes work into tasks, as a structured DAG dependency graph
 10. Tasks should be best effort bite sized, but this is not always possible
 11. tests should live close with their work. I understand integ tests sometimes can't happen till the very end
 12. not truly a step 12(should happen earlier), but if there's design work involved, we will spin up a ui/ux agent whos job is to
            - know all of lawsofux.com, which we an create a full set of invokable skills for for context management
            - if existing codebase, scan it to understand desing system
            - write a design system document if it doesnt exist.
            - if design system is older than 3 days, do a code scan again and update the design doc
            - writes a designer doc on how the new ui things should look
13. It's a good idea to let the user know that the design doc is ready for review. Best effort determine if approval from user is a blocker or not (likely is)


Execution Phase. Can be new team or add to existing team. If new team please call TeamDelete toolcall
-Spawn 1 QA Agent
-Spawn 1 Code Review Agent
Each Coding Agent
    => do work in a worktree
        => work should have tests to do basic validation
        => some tasks can't have tests, so best judgement is reasonable
        => submit an mr(based on agent name + task)
            => places review task on task queue (sqlite, basically LRU)
            => code review agent
                => checks task queue
                => reviews, gives feedback => sends back to relevant work agent
                => once approved, hands off to qa agent
            => qa agent
                => validates if task needs review
                    => if yes, checks if product agent wrote feature request
                        => if no, best judgement review
                        => if yes, opens chrome and executes
                            - Note: some QA work may be api tests, and not use chrome.
                => on failure, notify code agent for another round of work, before putting task back on queue
                    => this removes task from review queue
                => on success, we can merge, this removes task from review queue
        => after code review and qa agent approval, merge back into epic worktree branch

    -If critical errors are found, let the teamlead know, as they may need to talk to product and/or architect to reupdate the work.
    -If so, the teamlead needs to tell the coding agents to hang tight as they reupdate the doc. This may wipe the task list or not (best effort determination)


Full Validation Phase
    - QA agent decomposes all product feature flows into necessary tests (preferably playwright test suites with video enabled, but api tests if none other exist)
    - Tests every flow
    - Any broken flows goes to team lead for review
    - This may trigger new design phases for architect+product and/or new tasks for coding agents
---

Type of Work: Bug discovery:
---
- Team lead is prompted different possible leads
- Alternatively Team lead theorizes different leads given nature of bug
- Team lead spawns a coding agent or qa agent(best judgement for each lead) to investigate
- Each agent investigates and theorizes. Each agent challanges each other
- Agents reach consensus, if team lead feels they are stuck, they tell them to stop and prompt user that
    they don't know whats going on

- If solution is found, determine if it's lightweight fix. If it is simply spawn a code teamate to implement
    - If determined to be sufficiently complex, follow the Epic workflow

---
